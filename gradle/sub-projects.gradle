dependencies {
    implementation project(":core")
}

task fatJar(type: Jar) {
    group "package"
    manifest {
        attributes 'Main-Class': "${mainClass}"
    }
    archivesBaseName = "${project.name}" + "-all"
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
    from { configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}

task copyDockerfile(type: Copy) {
    group "docker"
    from "${projectDir}/docker"
    into "${buildDir}"
}

build.dependsOn(fatJar)
build.dependsOn(copyDockerfile)